<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EPUB.js Pagination Example</title>

    <script src="../dist/epub.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari:wght@200&family=Roboto+Serif:wght@100&display=swap" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="examples.css" />
  </head>
  <body>
    <div id="main">
			<div style="vertical-align: middle; text-align: center;">
				<select id="chapter" onchange="changeChapter()">
					<option value="Jnaneshwari-Adhyay-01-TX" selected> Shree Jnaneshwar Adhyay 01 transliterated </option>
					<option value="Jnaneshwari-Adhyay-01-Devanagari"> Shree Jnaneshwar Adhyay 01 devanagari </option>
					<option value="Jnaneshwari-Adhyay-02-TX"> Shree Jnaneshwar Adhyay 02 transliterated </option>
					<option value="Jnaneshwari-Adhyay-02-Devanagari"> Shree Jnaneshwar Adhyay 02 devanagari </option>
					<option value="Jnaneshwari-Adhyay-03-TX"> Shree Jnaneshwar Adhyay 03 transliterated </option>
					<option value="Jnaneshwari-Adhyay-03-Devanagari"> Shree Jnaneshwar Adhyay 03 devanagari </option>
					<option value="Jnaneshwari-Adhyay-04-TX"> Shree Jnaneshwar Adhyay 04 transliterated </option>
					<option value="Jnaneshwari-Adhyay-04-Devanagari"> Shree Jnaneshwar Adhyay 04 devanagari </option>
					<option value="Jnaneshwari-Adhyay-05-TX"> Shree Jnaneshwar Adhyay 05 transliterated </option>
					<option value="Jnaneshwari-Adhyay-05-Devanagari"> Shree Jnaneshwar Adhyay 05 devanagari </option>
					<option value="Jnaneshwari-Adhyay-06-TX"> Shree Jnaneshwar Adhyay 06 transliterated </option>
					<option value="Jnaneshwari-Adhyay-06-Devanagari"> Shree Jnaneshwar Adhyay 06 devanagari </option>
					<option value="Jnaneshwari-Adhyay-07-TX"> Shree Jnaneshwar Adhyay 07 transliterated </option>
					<option value="Jnaneshwari-Adhyay-07-Devanagari"> Shree Jnaneshwar Adhyay 07 devanagari </option>
					<option value="Jnaneshwari-Adhyay-08-TX"> Shree Jnaneshwar Adhyay 08 transliterated </option>
					<option value="Jnaneshwari-Adhyay-08-Devanagari"> Shree Jnaneshwar Adhyay 08 devanagari </option>
					<option value="Jnaneshwari-Adhyay-09-TX"> Shree Jnaneshwar Adhyay 09 transliterated </option>
					<option value="Jnaneshwari-Adhyay-09-Devanagari"> Shree Jnaneshwar Adhyay 09 devanagari </option>
					<option value="Jnaneshwari-Adhyay-10-TX"> Shree Jnaneshwar Adhyay 10 transliterated </option>
					<option value="Jnaneshwari-Adhyay-10-Devanagari"> Shree Jnaneshwar Adhyay 10 devanagari </option>
					<option value="Jnaneshwari-Adhyay-11-TX"> Shree Jnaneshwar Adhyay 11 transliterated </option>
					<option value="Jnaneshwari-Adhyay-11-Devanagari"> Shree Jnaneshwar Adhyay 11 devanagari </option>
					<option value="Jnaneshwari-Adhyay-12-TX"> Shree Jnaneshwar Adhyay 12 transliterated </option>
					<option value="Jnaneshwari-Adhyay-12-Devanagari"> Shree Jnaneshwar Adhyay 12 devanagari </option>
					<option value="Jnaneshwari-Adhyay-13-TX"> Shree Jnaneshwar Adhyay 13 transliterated </option>
					<option value="Jnaneshwari-Adhyay-13-Devanagari"> Shree Jnaneshwar Adhyay 13 devanagari </option>
					<option value="Jnaneshwari-Adhyay-14-TX"> Shree Jnaneshwar Adhyay 14 transliterated </option>
					<option value="Jnaneshwari-Adhyay-14-Devanagari"> Shree Jnaneshwar Adhyay 14 devanagari </option>
					<option value="Jnaneshwari-Adhyay-15-TX"> Shree Jnaneshwar Adhyay 15 transliterated </option>
					<option value="Jnaneshwari-Adhyay-15-Devanagari"> Shree Jnaneshwar Adhyay 15 devanagari </option>
					<option value="Jnaneshwari-Adhyay-16-TX"> Shree Jnaneshwar Adhyay 16 transliterated </option>
					<option value="Jnaneshwari-Adhyay-16-Devanagari"> Shree Jnaneshwar Adhyay 16 devanagari </option>
					<option value="Jnaneshwari-Adhyay-17-TX"> Shree Jnaneshwar Adhyay 17 transliterated </option>
					<option value="Jnaneshwari-Adhyay-17-Devanagari"> Shree Jnaneshwar Adhyay 17 devanagari </option>
					<option value="Jnaneshwari-Adhyay-18-TX"> Shree Jnaneshwar Adhyay 18 transliterated </option>
					<option value="Jnaneshwari-Adhyay-18-Devanagari"> Shree Jnaneshwar Adhyay 18 devanagari </option>
				</select>
			</div>
      <div id="viewer" class="spreads loading">
			</div>
      <span id="hiddenTitle"></span>
      <a id="prev" href="#prev" class="arrow">‹</a>
      <a id="next" href="#next" class="arrow">›</a>
    </div>
    <div id="navigation">
      <a id="closer">
        <i class="material-icons">close</i>
      </a>
      <h1 id="title">...</h1>
      <image id="cover" width="150px" />
      <h2 id="author">...</h2>
      <ul id="toc"></ul>
    </div>

    <script>
      var currentLanguagePreferenceDropdown = 'transliterated';
      var book, rendition;

      const changeChapter = () => {
        const chapter = document.getElementById('chapter').value;
				console.log("chapter ",chapter)
				loadBook(`http://localhost:8080/examples/books/Jnaneshwari/${chapter}/EPUB/content.opf`);
      };

			const goToNextPage = () => {
				rendition.next()
			}

			const goToPrevPage = () => {
				rendition.prev()
			}

      const loadBook = (bookUrl) => {
        try {
          if (book !== null && book !== undefined) {
            book.destroy();
          }

          // if (rendition !== null && rendition !== undefined) {
          //   rendition.destroy();
          // }

          book = ePub(bookUrl);
          rendition = book.renderTo('viewer', {
            method: 'continuous',
            width: '100%',
            height: '100%',
            allowScriptedContent: true,
          });
        } catch (err) {
          console.log(err);
        }

        rendition.display(undefined);

        rendition.themes.default({
          p: {
            margin: '30px',
          },
        });

        rendition.themes.register('custom-font', 'examples.css');
        rendition.themes.select('custom-font');
      }; // END: loadBook method

      changeChapter();

			var next = document.getElementById('next');
      next.addEventListener('click', goToNextPage, false );

			var prev = document.getElementById('prev');
			prev.addEventListener('click', goToPrevPage, false );
    </script>
  </body>
</html>
