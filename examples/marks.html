<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EPUB.js Pagination Example</title>

    <script src="../dist/epub.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari:wght@200&family=Roboto+Serif:wght@100&display=swap" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="examples.css" />
  </head>
  <body>
    <div id="main">
      <div id="viewer" class="spreads loading"></div>
      <span id="hiddenTitle"></span>
      <a id="prev" href="#prev" class="arrow">‹</a>
      <a id="next" href="#next" class="arrow">›</a>
    </div>
    <div id="navigation">
      <a id="closer">
        <i class="material-icons">close</i>
      </a>
      <h1 id="title">...</h1>
      <image id="cover" width="150px" />
      <h2 id="author">...</h2>
      <ul id="toc"></ul>
    </div>

    <script>
      // Load the opf
      // var book = ePub("https://s3.amazonaws.com/moby-dick/OPS/package.opf");
      // var book = ePub("https://s3.amazonaws.com/moby-dick/moby-dick.epub")

      var book, rendition;
      try {
        // book = ePub('http://localhost:8080/examples/books/SVP-106/EPUB/content.opf');
        book = ePub('http://localhost:8080/examples/books/Jnaneshwari/Jnaneshwar-Adhyay-1/EPUB/content.opf ');
        // book = ePub("https://s3.amazonaws.com/moby-dick/OPS/package.opf");
        rendition = book.renderTo('viewer', {
          method: 'continuous',
          width: '100%',
          height: '100%',
          allowScriptedContent: true,
        });
      } catch (err) {
        console.log(err);
      }

      var displayed = rendition.display(undefined);

      // Navigation loaded
      // book.loaded.navigation.then(function(toc){
      //   console.log(toc);
      // });

      var next = document.getElementById('next');
      next.addEventListener(
        'click',
        function () {
          rendition.next();
        },
        false
      );

      var prev = document.getElementById('prev');
      prev.addEventListener(
        'click',
        function () {
          rendition.prev();
        },
        false
      );

      var keyListener = function (e) {
        // Left Key
        if ((e.keyCode || e.which) == 37) {
          rendition.prev();
        }

        // Right Key
        if ((e.keyCode || e.which) == 39) {
          rendition.next();
        }
      };

      rendition.on('keyup', keyListener);
      document.addEventListener('keyup', keyListener, false);

      rendition.on('relocated', function (location) {
        console.log(location);
      });

      rendition.themes.default({
        p: {
          margin: '30px',
        },
      });

			rendition.themes.register("custom-font", "examples.css");
      rendition.themes.select('custom-font');

      // rendition.hooks.content.register(function (contents) {
      //   console.log("Book Contents ", contents);
      // });

      // book.spine.hooks.content.register(function (contents) {
      //   console.log("Spine contents ", contents);
      // });
    </script>
  </body>
</html>
